{"version":3,"file":"ng_class.js","sourceRoot":"","sources":["../../../../../../modules/@angular/common/src/directives/ng_class.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  DoCheck,\n  OnDestroy,\n  Directive,\n  ElementRef,\n  IterableDiffers,\n  KeyValueDiffers,\n  Renderer,\n  IterableDiffer,\n  KeyValueDiffer,\n  CollectionChangeRecord,\n  KeyValueChangeRecord\n} from '@angular/core';\nimport {isPresent, isString, isArray} from '../../src/facade/lang';\nimport {StringMapWrapper, isListLikeIterable} from '../../src/facade/collection';\nexport class NgClass implements DoCheck, OnDestroy {\nprivate _iterableDiffer: IterableDiffer;\nprivate _keyValueDiffer: KeyValueDiffer;\nprivate _initialClasses: string[] = [];\nprivate _rawClass: string[] | Set<string>;\n/**\n * @param {?} _iterableDiffers\n * @param {?} _keyValueDiffers\n * @param {?} _ngEl\n * @param {?} _renderer\n */\nconstructor(private _iterableDiffers: IterableDiffers,\nprivate _keyValueDiffers: KeyValueDiffers,\nprivate _ngEl: ElementRef,\nprivate _renderer: Renderer) {}\n\n  set initialClasses(v: string) {\n    this._applyInitialClasses(true);\n    this._initialClasses = isPresent(v) && isString(v) ? v.split(' ') : [];\n    this._applyInitialClasses(false);\n    this._applyClasses(this._rawClass, false);\n  }\n\n  set rawClass(v: string | string[] | Set<string>| {[key: string]: any}) {\n    this._cleanupClasses(this._rawClass);\n\n    if (isString(v)) {\n      v = ( /** @type {?} */((<string>v))).split(' ');\n    }\n\n    this._rawClass = /** @type {?} */(( <string[] | Set<string>>v));\n    this._iterableDiffer = null;\n    this._keyValueDiffer = null;\n    if (isPresent(v)) {\n      if (isListLikeIterable(v)) {\n        this._iterableDiffer = this._iterableDiffers.find(v).create(null);\n      } else {\n        this._keyValueDiffer = this._keyValueDiffers.find(v).create(null);\n      }\n    }\n  }\n/**\n * @return {?}\n */\nngDoCheck(): void {\n    if (isPresent(this._iterableDiffer)) {\n      var /** @type {?} */ changes = this._iterableDiffer.diff(this._rawClass);\n      if (isPresent(changes)) {\n        this._applyIterableChanges(changes);\n      }\n    }\n    if (isPresent(this._keyValueDiffer)) {\n      var /** @type {?} */ changes = this._keyValueDiffer.diff(this._rawClass);\n      if (isPresent(changes)) {\n        this._applyKeyValueChanges(changes);\n      }\n    }\n  }\n/**\n * @return {?}\n */\nngOnDestroy(): void { this._cleanupClasses(this._rawClass); }\n/**\n * @param {?} rawClassVal\n * @return {?}\n */\nprivate _cleanupClasses(rawClassVal: string[] | Set<string>| {[key: string]: any}): void {\n    this._applyClasses(rawClassVal, true);\n    this._applyInitialClasses(false);\n  }\n/**\n * @param {?} changes\n * @return {?}\n */\nprivate _applyKeyValueChanges(changes: any): void {\n    changes.forEachAddedItem(\n        (record: KeyValueChangeRecord) => { this._toggleClass(record.key, record.currentValue); });\n    changes.forEachChangedItem(\n        (record: KeyValueChangeRecord) => { this._toggleClass(record.key, record.currentValue); });\n    changes.forEachRemovedItem((record: KeyValueChangeRecord) => {\n      if (record.previousValue) {\n        this._toggleClass(record.key, false);\n      }\n    });\n  }\n/**\n * @param {?} changes\n * @return {?}\n */\nprivate _applyIterableChanges(changes: any): void {\n    changes.forEachAddedItem(\n        (record: CollectionChangeRecord) => { this._toggleClass(record.item, true); });\n    changes.forEachRemovedItem(\n        (record: CollectionChangeRecord) => { this._toggleClass(record.item, false); });\n  }\n/**\n * @param {?} isCleanup\n * @return {?}\n */\nprivate _applyInitialClasses(isCleanup: boolean) {\n    this._initialClasses.forEach(className => this._toggleClass(className, !isCleanup));\n  }\n/**\n * @param {?} rawClassVal\n * @param {?} isCleanup\n * @return {?}\n */\nprivate _applyClasses(rawClassVal: string[] | Set<string>| {[key: string]: any},\n                        isCleanup: boolean) {\n    if (isPresent(rawClassVal)) {\n      if (isArray(rawClassVal)) {\n        ( /** @type {?} */((<string[]>rawClassVal))).forEach(className => this._toggleClass(className, !isCleanup));\n      } else if (rawClassVal instanceof Set) {\n        ( /** @type {?} */((<Set<string>>rawClassVal))).forEach(className => this._toggleClass(className, !isCleanup));\n      } else {\n        StringMapWrapper.forEach( /** @type {?} */((<{[k: string]: any}>rawClassVal)),\n                                 (expVal: any, className: string) => {\n                                   if (isPresent(expVal)) this._toggleClass(className, !isCleanup);\n                                 });\n      }\n    }\n  }\n/**\n * @param {?} className\n * @param {?} enabled\n * @return {?}\n */\nprivate _toggleClass(className: string, enabled: boolean): void {\n    className = className.trim();\n    if (className.length > 0) {\n      if (className.indexOf(' ') > -1) {\n        var /** @type {?} */ classes = className.split(/\\s+/g);\n        for (var /** @type {?} */ i = 0, /** @type {?} */ len = classes.length; i < len; i++) {\n          this._renderer.setElementClass(this._ngEl.nativeElement, classes[i], enabled);\n        }\n      } else {\n        this._renderer.setElementClass(this._ngEl.nativeElement, className, enabled);\n      }\n    }\n  }\n\n  static _tsickle_typeAnnotationsHelper() {\n /** @type {?} */\nNgClass.prototype._iterableDiffer;\n /** @type {?} */\nNgClass.prototype._keyValueDiffer;\n /** @type {?} */\nNgClass.prototype._initialClasses;\n /** @type {?} */\nNgClass.prototype._rawClass;\n /** @type {?} */\nNgClass.prototype._iterableDiffers;\n /** @type {?} */\nNgClass.prototype._keyValueDiffers;\n /** @type {?} */\nNgClass.prototype._ngEl;\n /** @type {?} */\nNgClass.prototype._renderer;\n  }\n\n/** @nocollapse */ static decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{selector: '[ngClass]', inputs: ['rawClass: ngClass', 'initialClasses: class']}, ] },\n];\n/** @nocollapse */ static ctorParameters: {type: Function, decorators?: DecoratorInvocation[]}[] = [\n{type: IterableDiffers, },\n{type: KeyValueDiffers, },\n{type: ElementRef, },\n{type: Renderer, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}